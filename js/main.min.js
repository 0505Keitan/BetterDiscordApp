function Core(){}function EmoteModule(){}function PublicServers(){}function PublicServers(){}function QuickEmoteMenu(){}function SettingsPanel(){}function Utils(){}var settingsPanel,emoteModule,utils,quickEmoteMenu,jsVersion=1.2,mainObserver,twitchEmoteUrlStart="https://static-cdn.jtvnw.net/emoticons/v1/",twitchEmoteUrlEnd="/1.0",ffzEmoteUrlStart="https://cdn.frankerfacez.com/emoticon/",ffzEmoteUrlEnd="/1",bttvEmoteUrlStart="",bttvEmoteUrlEnd="",settings={"Save logs locally":{id:"bda-gs-0",info:"Saves chat logs locally",implemented:!1},"Public Servers":{id:"bda-gs-1",info:"Display public servers",implemented:!1},"Minimal Mode":{id:"bda-gs-2",info:"Hide elements and reduce the size of elements.",implemented:!0},"Hide Channels":{id:"bda-gs-3",info:"Hide channels in minimal mode",implemented:!0},"Quick Emote Menu":{id:"bda-es-0",info:"Show quick emote menu for adding emotes",implemented:!0},"FrankerFaceZ Emotes":{id:"bda-es-1",info:"Show FrankerFaceZ Emotes",implemented:!0},"BetterTTV Emotes":{id:"bda-es-2",info:"Show BetterTTV Emotes",implemented:!1},"Emote Autocomplete":{id:"bda-es-3",info:"Autocomplete emote commands",implemented:!1},"Emote Auto Capitalization":{id:"bda-es-4",info:"Autocapitalize emote commands",implemented:!0},"Override Default Emotes":{id:"bda-es-5",info:"Override default emotes",implemented:!1}},defaultCookie={version:jsVersion,"bda-gs-0":!1,"bda-gs-1":!0,"bda-gs-2":!1,"bda-gs-3":!1,"bda-es-0":!0,"bda-es-1":!1,"bda-es-2":!1,"bda-es-3":!1,"bda-es-4":!1,"bda-es-5":!0},settingsCookie={};Core.prototype.init=function(){function e(){$(".guilds-wrapper").size()>0?($(".guilds li:first-child").after($("<li/>",{id:"tc-settings-li"}).append($("<div/>",{"class":"guild-inner"}).append($("<a/>").append($("<div/>",{"class":"avatar-small",id:"tc-settings-button"}))))),settingsPanel=new SettingsPanel,settingsPanel.init(),quickEmoteMenu.init(!1),$("#tc-settings-button").on("click",function(){settingsPanel.show()})):setTimeout(function(){e()},100)}utils=new Utils,emoteModule=new EmoteModule,quickEmoteMenu=new QuickEmoteMenu,emoteModule.init(),emoteModule.autoCapitalize(),this.initSettings(),this.initObserver(),e()},Core.prototype.initSettings=function(){if(void 0==$.cookie("better-discord"))settingsCookie=defaultCookie,this.saveSettings();else{this.loadSettings();for(var e in defaultCookie)if(void 0==settingsCookie[e]){settingsCookie=defaultCookie,this.saveSettings(),alert("BetterDiscord settings reset due to update/error");break}}},Core.prototype.saveSettings=function(){$.cookie("better-discord",JSON.stringify(settingsCookie),{expires:365,path:"/"})},Core.prototype.loadSettings=function(){settingsCookie=JSON.parse($.cookie("better-discord"))},Core.prototype.initObserver=function(){mainObserver=new MutationObserver(function(e){e.forEach(function(e){null!=e.target.getAttribute("class")&&-1!=e.target.getAttribute("class").indexOf("titlebar")&&quickEmoteMenu.obsCallback(),emoteModule.obsCallback(e)})}),mainObserver.observe(document,{childList:!0,subtree:!0})};var autoCapitalize=!0,ffzEnabled=!1,bttvEnabled=!1,emotesFfz={},emotesBTTV={},emotesTwitch={":(":2,":)":1,":/":10,":D":3,":o":8,":p":12,":z":5,";)":11,";p":13,"<3":9,">(":4,"B)":7,o_o:6,"R)":14,"4Head":354,ANELE:3792,ArgieB8:51838,ArsonNoSexy:50,AsianGlow:74,AtGL:9809,AthenaPMS:32035,AtIvy:9800,AtWW:9801,BabyRage:22639,BatChest:1905,BCWarrior:30,BibleThump:86,BigBrother:1904,BionicBunion:24,BlargNaut:38,BloodTrail:69,BORT:243,BrainSlug:881,BrokeBack:4057,BuddhaBar:27602,CoolCat:58127,CorgiDerp:49106,CougarHunt:21,DAESuppy:973,DansGame:33,DatHass:20225,DatSheffy:170,DBstyle:73,deExcite:46249,deIlluminati:46248,DendiFace:58135,DogFace:1903,DOOMGuy:54089,EagleEye:20,EleGiggle:4339,EvilFetus:72,FailFish:360,FPSMarksman:42,FrankerZ:65,FreakinStinkin:39,FUNgineer:244,FunRun:48,FuzzyOtterOO:168,GasJoker:9802,GingerPower:32,GrammarKing:3632,HassanChop:68,HeyGuys:30259,HotPokket:357,HumbleLife:46881,ItsBoshyTime:169,Jebaited:90,JKanStyle:15,JonCarnage:26,KAPOW:9803,Kappa:25,KappaPride:55338,Keepo:1902,KevinTurtle:40,Kippa:1901,Kreygasm:41,KZskull:5253,Mau5:30134,mcaT:35063,MechaSupes:9804,MrDestructoid:28,MVGame:29,NightBat:9805,NinjaTroll:45,NoNoSpot:44,NotATK:34875,NotLikeThis:58765,OMGScoots:91,OneHand:66,OpieOP:356,OptimizePrime:16,OSbeaver:47005,OSbury:47420,OSdeo:47007,OSfrog:47008,OSkomodo:47010,OSrob:47302,OSsloth:47011,panicBasket:22998,PanicVis:3668,PazPazowitz:19,PeoplesChamp:3412,PermaSmug:27509,PicoMause:27,PipeHype:4240,PJHarley:9808,PJSalt:36,PMSTwin:92,PogChamp:88,Poooound:358,PraiseIt:38586,PRChase:28328,PunchTrees:47,PuppeyFace:58136,RaccAttack:27679,RalpherZ:1900,RedCoat:22,ResidentSleeper:245,RitzMitz:4338,RuleFive:361,ShadyLulu:52492,Shazam:9807,shazamicon:9806,ShazBotstix:87,ShibeZ:27903,SMOrc:52,SMSkull:51,SoBayed:1906,SoonerLater:355,SriHead:14706,SSSsss:46,StoneLightning:17,StrawBeary:37,SuperVinlin:31,SwiftRage:34,tbBaconBiscuit:44499,tbChickenBiscuit:56879,tbQuesarito:56883,tbSausageBiscuit:56881,tbSpicy:56882,tbSriracha:56880,TF2John:1899,TheKing:50901,TheRinger:18,TheTarFu:70,TheThing:7427,ThunBeast:1898,TinyFace:67,TooSpicy:359,TriHard:171,TTours:38436,UleetBackup:49,UncleNox:3666,UnSane:71,VaultBoy:54090,Volcania:166,WholeWheat:1896,WinWaker:167,WTRuck:1897,WutFace:28087,YouWHY:4337},twitchAc={"4head":"4Head",anele:"ANELE",argieb8:"ArgieB8",arsonnosexy:"ArsonNoSexy",asianglow:"AsianGlow",atgl:"AtGL",athenapms:"AthenaPMS",ativy:"AtIvy",atww:"AtWW",babyrage:"BabyRage",batchest:"BatChest",bcwarrior:"BCWarrior",biblethump:"BibleThump",bigbrother:"BigBrother",bionicbunion:"BionicBunion",blargnaut:"BlargNaut",bloodtrail:"BloodTrail",bort:"BORT",brainslug:"BrainSlug",brokeback:"BrokeBack",buddhabar:"BuddhaBar",coolcat:"CoolCat",corgiderp:"CorgiDerp",cougarhunt:"CougarHunt",daesuppy:"DAESuppy",dansgame:"DansGame",dathass:"DatHass",datsheffy:"DatSheffy",dbstyle:"DBstyle",deexcite:"deExcite",deilluminati:"deIlluminati",dendiface:"DendiFace",dogface:"DogFace",doomguy:"DOOMGuy",eagleeye:"EagleEye",elegiggle:"EleGiggle",evilfetus:"EvilFetus",failfish:"FailFish",fpsmarksman:"FPSMarksman",frankerz:"FrankerZ",freakinstinkin:"FreakinStinkin",fungineer:"FUNgineer",funrun:"FunRun",fuzzyotteroo:"FuzzyOtterOO",gasjoker:"GasJoker",gingerpower:"GingerPower",grammarking:"GrammarKing",hassanchop:"HassanChop",heyguys:"HeyGuys",hotpokket:"HotPokket",humblelife:"HumbleLife",itsboshytime:"ItsBoshyTime",jebaited:"Jebaited",jkanstyle:"JKanStyle",joncarnage:"JonCarnage",kapow:"KAPOW",kappa:"Kappa",kappapride:"KappaPride",keepo:"Keepo",kevinturtle:"KevinTurtle",kippa:"Kippa",kreygasm:"Kreygasm",kzskull:"KZskull",mau5:"Mau5",mcat:"mcaT",mechasupes:"MechaSupes",mrdestructoid:"MrDestructoid",mvgame:"MVGame",nightbat:"NightBat",ninjatroll:"NinjaTroll",nonospot:"NoNoSpot",notatk:"NotATK",notlikethis:"NotLikeThis",omgscoots:"OMGScoots",onehand:"OneHand",opieop:"OpieOP",optimizeprime:"OptimizePrime",osbeaver:"OSbeaver",osbury:"OSbury",osdeo:"OSdeo",osfrog:"OSfrog",oskomodo:"OSkomodo",osrob:"OSrob",ossloth:"OSsloth",panicbasket:"panicBasket",panicvis:"PanicVis",pazpazowitz:"PazPazowitz",peopleschamp:"PeoplesChamp",permasmug:"PermaSmug",picomause:"PicoMause",pipehype:"PipeHype",pjharley:"PJHarley",pjsalt:"PJSalt",pmstwin:"PMSTwin",pogchamp:"PogChamp",poooound:"Poooound",praiseit:"PraiseIt",prchase:"PRChase",punchtrees:"PunchTrees",puppeyface:"PuppeyFace",raccattack:"RaccAttack",ralpherz:"RalpherZ",redcoat:"RedCoat",residentsleeper:"ResidentSleeper",ritzmitz:"RitzMitz",rulefive:"RuleFive",shadylulu:"ShadyLulu",shazam:"Shazam",shazamicon:"shazamicon",shazbotstix:"ShazBotstix",shibez:"ShibeZ",smorc:"SMOrc",smskull:"SMSkull",sobayed:"SoBayed",soonerlater:"SoonerLater",srihead:"SriHead",ssssss:"SSSsss",stonelightning:"StoneLightning",strawbeary:"StrawBeary",supervinlin:"SuperVinlin",swiftrage:"SwiftRage",tbbaconbiscuit:"tbBaconBiscuit",tbchickenbiscuit:"tbChickenBiscuit",tbquesarito:"tbQuesarito",tbsausagebiscuit:"tbSausageBiscuit",tbspicy:"tbSpicy",tbsriracha:"tbSriracha",tf2john:"TF2John",theking:"TheKing",theringer:"TheRinger",thetarfu:"TheTarFu",thething:"TheThing",thunbeast:"ThunBeast",tinyface:"TinyFace",toospicy:"TooSpicy",trihard:"TriHard",ttours:"TTours",uleetbackup:"UleetBackup",unclenox:"UncleNox",unsane:"UnSane",vaultboy:"VaultBoy",volcania:"Volcania",wholewheat:"WholeWheat",winwaker:"WinWaker",wtruck:"WTRuck",wutface:"WutFace",youwhy:"YouWHY"};EmoteModule.prototype.init=function(){},EmoteModule.prototype.obsCallback=function(e){for(var t=this,i=0;i<e.addedNodes.length;++i){var a=e.addedNodes.item(i);if(a){var o=t.getNodes(a);for(var n in o)t.injectEmote(o[n])}}},EmoteModule.prototype.getNodes=function(e){for(var t,i=[],a=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=a.nextNode();)i.push(t);return i},EmoteModule.prototype.injectEmote=function(e){if("undefined"!=typeof emotesTwitch&&e.parentElement){var t=e.parentElement;if("SPAN"==t.tagName){var i=t.innerHTML,a=i.split(" ");a&&(a.some(function(e){emotesTwitch.hasOwnProperty(e)?i=i.replace(e,"<img src="+twitchEmoteUrlStart+emotesTwitch[e]+twitchEmoteUrlEnd+" title="+e+"></img>"):"undefined"!=typeof emotesFfz&&settingsCookie["bda-es-1"]&&(emotesFfz.hasOwnProperty(e)?i=i.replace(e,"<img src="+ffzEmoteUrlStart+emotesFfz[e]+ffzEmoteUrlEnd+" title="+e+"></img>"):"undefined"!=typeof emotesBTTV&&settingsCookie["bda-es-2"]&&emotesBTTV.hasOwnProperty(e)&&(i=i.replace(e,"<img src="+bttvEmoteUrlStart+emotesBTTV[e]+bttvEmoteUrlEnd+" title="+e+"></img>")))}),t.innerHTML=i)}}},EmoteModule.prototype.autoCapitalize=function(){var e=this;$("body").delegate($(".channel-textarea-inner textarea"),"keyup change paste",function(){if(settingsCookie["bda-es-4"]){var t=$(".channel-textarea-inner textarea").val();if(void 0!=t){var i=t.split(" ").pop();if(i.length>3){var a=e.capitalize(i.toLowerCase());null!=a&&$(".channel-textarea-inner textarea").val(t.replace(i,a))}}}})},EmoteModule.prototype.capitalize=function(e){return twitchAc.hasOwnProperty(e)?twitchAc[e]:null},PublicServers.prototype.init=function(){},PublicServers.prototype.init=function(){};var emoteBtn,emoteMenu,globalEmotes={":(":2,":)":1,":/":10,":D":3,":o":8,":p":12,":z":5,";)":11,";p":13,"<3":9,">(":4,"B)":7,o_o:6,"R)":14,"4Head":354,ANELE:3792,ArgieB8:51838,ArsonNoSexy:50,AsianGlow:74,AtGL:9809,AthenaPMS:32035,AtIvy:9800,AtWW:9801,BabyRage:22639,BatChest:1905,BCWarrior:30,BibleThump:86,BigBrother:1904,BionicBunion:24,BlargNaut:38,BloodTrail:69,BORT:243,BrainSlug:881,BrokeBack:4057,BuddhaBar:27602,CoolCat:58127,CorgiDerp:49106,CougarHunt:21,DAESuppy:973,DansGame:33,DatHass:20225,DatSheffy:170,DBstyle:73,deExcite:46249,deIlluminati:46248,DendiFace:58135,DogFace:1903,DOOMGuy:54089,EagleEye:20,EleGiggle:4339,EvilFetus:72,FailFish:360,FPSMarksman:42,FrankerZ:65,FreakinStinkin:39,FUNgineer:244,FunRun:48,FuzzyOtterOO:168,GasJoker:9802,GingerPower:32,GrammarKing:3632,HassanChop:68,HeyGuys:30259,HotPokket:357,HumbleLife:46881,ItsBoshyTime:169,Jebaited:90,JKanStyle:15,JonCarnage:26,KAPOW:9803,Kappa:25,KappaPride:55338,Keepo:1902,KevinTurtle:40,Kippa:1901,Kreygasm:41,KZskull:5253,Mau5:30134,mcaT:35063,MechaSupes:9804,MrDestructoid:28,MVGame:29,NightBat:9805,NinjaTroll:45,NoNoSpot:44,NotATK:34875,NotLikeThis:58765,OMGScoots:91,OneHand:66,OpieOP:356,OptimizePrime:16,OSbeaver:47005,OSbury:47420,OSdeo:47007,OSfrog:47008,OSkomodo:47010,OSrob:47302,OSsloth:47011,panicBasket:22998,PanicVis:3668,PazPazowitz:19,PeoplesChamp:3412,PermaSmug:27509,PicoMause:27,PipeHype:4240,PJHarley:9808,PJSalt:36,PMSTwin:92,PogChamp:88,Poooound:358,PraiseIt:38586,PRChase:28328,PunchTrees:47,PuppeyFace:58136,RaccAttack:27679,RalpherZ:1900,RedCoat:22,ResidentSleeper:245,RitzMitz:4338,RuleFive:361,ShadyLulu:52492,Shazam:9807,shazamicon:9806,ShazBotstix:87,ShibeZ:27903,SMOrc:52,SMSkull:51,SoBayed:1906,SoonerLater:355,SriHead:14706,SSSsss:46,StoneLightning:17,StrawBeary:37,SuperVinlin:31,SwiftRage:34,tbBaconBiscuit:44499,tbChickenBiscuit:56879,tbQuesarito:56883,tbSausageBiscuit:56881,tbSpicy:56882,tbSriracha:56880,TF2John:1899,TheKing:50901,TheRinger:18,TheTarFu:70,TheThing:7427,ThunBeast:1898,TinyFace:67,TooSpicy:359,TriHard:171,TTours:38436,UleetBackup:49,UncleNox:3666,UnSane:71,VaultBoy:54090,Volcania:166,WholeWheat:1896,WinWaker:167,WTRuck:1897,WutFace:28087,YouWHY:4337},emoteList;QuickEmoteMenu.prototype.init=function(){emoteBtn=null,emoteMenu||this.initEmoteList();var e;emoteBtn=$("<div/>",{id:"twitchcord-button-container",style:"display:none"}).append($("<button/>",{id:"twitchcord-button",onclick:"return false;"})),$(".content.flex-spacer.flex-horizontal .flex-spacer.flex-vertical form").append(emoteBtn),emoteMenu.detach(),emoteBtn.append(emoteMenu),$("#twitchcord-button").on("click",function(){e=!e,e?(emoteMenu.addClass("emotemenu-open"),$(this).addClass("twitchcord-button-open")):(emoteMenu.removeClass(),$(this).removeClass())}),settingsCookie["bda-es-0"]&&emoteBtn.show(),$(".emote-icon").off(),$(".emote-icon").on("click",function(){var e=$(this).attr("id"),t=$(".channel-textarea-inner textarea");t.val(" "==t.val().slice(-1)?t.val()+e:t.val()+" "+e)})},QuickEmoteMenu.prototype.obsCallback=function(){emoteBtn&&$(".content.flex-spacer.flex-horizontal .flex-spacer.flex-vertical form")&&(tcbtn=$("#twitchcord-button-container"),void 0==tcbtn.parent().prop("tagName")&&(quickEmoteMenu=new QuickEmoteMenu,quickEmoteMenu.init(!0)))},QuickEmoteMenu.prototype.initEmoteList=function(){emoteMenu=$("<div/>",{id:"emote-menu"});var e=$("<div/>",{id:"emote-menu-header"}).append($("<span/>",{text:"Global Emotes"})),t=$("<div/>",{id:"emote-menu-inner"});emoteMenu.append(e),emoteMenu.append(t);for(var i in globalEmotes){var a=globalEmotes[i];t.append($("<div/>",{"class":"emote-container"}).append($("<img/>",{"class":"emote-icon",id:i,src:"https://static-cdn.jtvnw.net/emoticons/v1/"+a+"/1.0",title:i})))}};var links={"Check for updates":"#","Jiiks.net":"http://jiiks.net",Twitter:"http://twitter.com/jiiksi",Github:"https://github.com/jiiks"};SettingsPanel.prototype.getPanel=function(){return this.tcSettingsPanel},SettingsPanel.prototype.init=function(){var e=this;this.tcSettingsPanel=$("<div/>",{id:"tc-settings-panel",style:"display:none"}),this.getPanel().append($("<div/>",{id:"tc-settings-panel-header"}).append($("<h2/>",{text:"BetterDiscord - Settings"})).append($("<span/>",{id:"tc-settings-close",text:"X",style:"cursor:pointer;"})));var t=$("<ul/>");this.getPanel().append($("<div/>",{id:"tc-settings-panel-body"}).append(t)),$.each(settings,function(e,i){var a="tc-switch-on",o="tc-switch-off";settingsCookie[i.id]?a="tc-switch-on active":o="tc-switch-off active",t.append($("<li/>").append($("<h2/>",{text:e})).append($("<span/>",{html:" - <span>"+i.info+"</span>"+(0==i.implemented?'<span style="color:red">  Coming Soon</span>':"")})).append($("<div/>",{"class":i.implemented?"tc-switch":"tc-switch disabled",id:i.id}).append($("<span/>",{"class":o,text:"OFF"})).append($("<span/>",{"class":a,text:"ON"}))))});var i=$("<div/>",{id:"tc-settings-panel-footer"});i.append($("<span/>",{id:"tc-about",text:"BDA v"+version+"(js "+jsVersion+") by Jiiks | Settings are automatically saved."}));var a=$("<span/>",{id:"tc-links"});$.each(links,function(e,t){a.append($("<a/>",{href:t,text:e})),a.append($("<span/>",{text:" | "}))}),i.append(a),this.getPanel().append(i),$("body").append(this.getPanel()),$("#tc-settings-close").on("click",function(){e.show()}),$(".tc-switch").on("click",function(){e.handler($(this))}),settingsCookie["bda-es-0"]?$("#twitchcord-button-container").show():$("#twitchcord-button-container").hide(),settingsCookie["bda-gs-2"]?$("body").addClass("bd-minimal"):$("body").removeClass("bd-minimal"),settingsCookie["bda-gs-3"]?$("body").addClass("bd-minimal-chan"):$("body").removeClass("bd-minimal-chan")},SettingsPanel.prototype.show=function(){this.getPanel().toggle(),$("#tc-settings-li").removeClass(),this.getPanel().is(":visible")&&$("#tc-settings-li").addClass("active")},SettingsPanel.prototype.handler=function(e){var t=e.attr("id"),i=settingsCookie[t];i=!i,settingsCookie[t]=i;var a=$("#"+t+" .tc-switch-off"),o=$("#"+t+" .tc-switch-on");a.removeClass("active"),o.removeClass("active"),i?o.addClass("active"):a.addClass("active"),settingsCookie["bda-es-0"]?$("#twitchcord-button-container").show():$("#twitchcord-button-container").hide(),settingsCookie["bda-gs-2"]?$("body").addClass("bd-minimal"):$("body").removeClass("bd-minimal"),settingsCookie["bda-gs-3"]?$("body").addClass("bd-minimal-chan"):$("body").removeClass("bd-minimal-chan"),mainCore.saveSettings()},Utils.prototype.getTextArea=function(){return $(".channel-textarea-inner textarea")},Utils.prototype.jqDefer=function(e){window.jQuery?e():setTimeout(function(){this.jqDefer(e)},100)};