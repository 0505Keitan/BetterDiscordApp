function Core(){}function initSettings(){}function EmoteModule(){}function PublicServers(){}function QuickEmoteMenu(){}function SettingsPanel(){}function Utils(){}var twitchEmoteUrlStart="https://static-cdn.jtvnw.net/emoticons/v1/",twitchEmoteUrlEnd="/1.0",ffzEmoteUrlStart="https://cdn.frankerfacez.com/emoticon/",ffzEmoteUrlEnd="/1",bttvEmoteUrlStart="",bttvEmoteUrlEnd="",settings={"Save logs locally":{id:"bda-gs-sll",info:"Saves chat logs locally",implemented:!1},"Public Servers":{id:"bda-gs-psl",info:"Display public servers",implemented:!1},"Quick Emote Menu":{id:"bda-es-qme",info:"Show quick emote menu for adding emotes",implemented:!0},"FrankerFaceZ Emotes":{id:"bda-es-ffz",info:"Show FrankerFaceZ Emotes",implemented:!0},"BetterTTV Emotes":{id:"bda-es-bttv",info:"Show BetterTTV Emotes",implemented:!1},"Emote Autocomplete":{id:"bda-es-aec",info:"Autocomplete emote commands",implemented:!1},"Emote Auto Capitalization":{id:"bda-es-ace",info:"Autocapitalize emote commands",implemented:!0},"Override Default Emotes":{id:"bda-es-ode",info:"Override default emotes",implemented:!1}},defaultCookie={version:"1.0","bda-gs-sll":!1,"bda-gs-psl":!0,"bda-es-qme":!0,"bda-es-ffz":!1,"bda-es-bttv":!1,"bda-es-aec":!1,"bda-es-ace":!1,"bda-es-ode":!0},settingsCookie={},links={"Check for updates":"#","Jiiks.net":"http://jiiks.net",Twitter:"http://twitter.com/jiiksi",Github:"https://github.com/jiiks"},utils,emoteModule,quickEmoteMenu,settingsPanel;Core.prototype.init=function(){utils=new Utils,emoteModule=new EmoteModule,quickEmoteMenu=new QuickEmoteMenu,emoteModule.init(),emoteModule.observe(),emoteModule.autoCapitalize(),setTimeout(function(){initSettings(),$(".guilds li:first-child").after($("<li/>",{id:"tc-settings-li"}).append($("<div/>",{"class":"guild-inner"}).append($("<a/>").append($("<div/>",{"class":"avatar-small",id:"tc-settings-button",style:'background-image:url("https://a96edc24045943bce10e086d4fdfb287582825b6.googledrive.com/host/0B4q1DpUVMKCofkgwdTRpWkxYdVhhdEdDYXdFa2V3eWJvbUJ5bHM3dHFDM21taHJJem5JaUU/settings_icon.png")'}))))),settingsPanel=new SettingsPanel,settingsPanel.init(),quickEmoteMenu.init(),$("#tc-settings-button").on("click",function(){settingsPanel.show()})},3e3)};var autoCapitalize=!0,ffzEnabled=!1,bttvEnabled=!1,emotesFfz={},emotesBTTV={},emotesTwitch={":(":2,":)":1,":/":10,":D":3,":o":8,":p":12,":z":5,";)":11,";p":13,"<3":9,">(":4,"B)":7,o_o:6,"R)":14,"4Head":354,ANELE:3792,ArgieB8:51838,ArsonNoSexy:50,AsianGlow:74,AtGL:9809,AthenaPMS:32035,AtIvy:9800,AtWW:9801,BabyRage:22639,BatChest:1905,BCWarrior:30,BibleThump:86,BigBrother:1904,BionicBunion:24,BlargNaut:38,BloodTrail:69,BORT:243,BrainSlug:881,BrokeBack:4057,BuddhaBar:27602,CoolCat:58127,CorgiDerp:49106,CougarHunt:21,DAESuppy:973,DansGame:33,DatHass:20225,DatSheffy:170,DBstyle:73,deExcite:46249,deIlluminati:46248,DendiFace:58135,DogFace:1903,DOOMGuy:54089,EagleEye:20,EleGiggle:4339,EvilFetus:72,FailFish:360,FPSMarksman:42,FrankerZ:65,FreakinStinkin:39,FUNgineer:244,FunRun:48,FuzzyOtterOO:168,GasJoker:9802,GingerPower:32,GrammarKing:3632,HassanChop:68,HeyGuys:30259,HotPokket:357,HumbleLife:46881,ItsBoshyTime:169,Jebaited:90,JKanStyle:15,JonCarnage:26,KAPOW:9803,Kappa:25,KappaPride:55338,Keepo:1902,KevinTurtle:40,Kippa:1901,Kreygasm:41,KZskull:5253,Mau5:30134,mcaT:35063,MechaSupes:9804,MrDestructoid:28,MVGame:29,NightBat:9805,NinjaTroll:45,NoNoSpot:44,NotATK:34875,NotLikeThis:58765,OMGScoots:91,OneHand:66,OpieOP:356,OptimizePrime:16,OSbeaver:47005,OSbury:47420,OSdeo:47007,OSfrog:47008,OSkomodo:47010,OSrob:47302,OSsloth:47011,panicBasket:22998,PanicVis:3668,PazPazowitz:19,PeoplesChamp:3412,PermaSmug:27509,PicoMause:27,PipeHype:4240,PJHarley:9808,PJSalt:36,PMSTwin:92,PogChamp:88,Poooound:358,PraiseIt:38586,PRChase:28328,PunchTrees:47,PuppeyFace:58136,RaccAttack:27679,RalpherZ:1900,RedCoat:22,ResidentSleeper:245,RitzMitz:4338,RuleFive:361,ShadyLulu:52492,Shazam:9807,shazamicon:9806,ShazBotstix:87,ShibeZ:27903,SMOrc:52,SMSkull:51,SoBayed:1906,SoonerLater:355,SriHead:14706,SSSsss:46,StoneLightning:17,StrawBeary:37,SuperVinlin:31,SwiftRage:34,tbBaconBiscuit:44499,tbChickenBiscuit:56879,tbQuesarito:56883,tbSausageBiscuit:56881,tbSpicy:56882,tbSriracha:56880,TF2John:1899,TheKing:50901,TheRinger:18,TheTarFu:70,TheThing:7427,ThunBeast:1898,TinyFace:67,TooSpicy:359,TriHard:171,TTours:38436,UleetBackup:49,UncleNox:3666,UnSane:71,VaultBoy:54090,Volcania:166,WholeWheat:1896,WinWaker:167,WTRuck:1897,WutFace:28087,YouWHY:4337},twitchAc={"4head":"4Head",anele:"ANELE",argieb8:"ArgieB8",arsonnosexy:"ArsonNoSexy",asianglow:"AsianGlow",atgl:"AtGL",athenapms:"AthenaPMS",ativy:"AtIvy",atww:"AtWW",babyrage:"BabyRage",batchest:"BatChest",bcwarrior:"BCWarrior",biblethump:"BibleThump",bigbrother:"BigBrother",bionicbunion:"BionicBunion",blargnaut:"BlargNaut",bloodtrail:"BloodTrail",bort:"BORT",brainslug:"BrainSlug",brokeback:"BrokeBack",buddhabar:"BuddhaBar",coolcat:"CoolCat",corgiderp:"CorgiDerp",cougarhunt:"CougarHunt",daesuppy:"DAESuppy",dansgame:"DansGame",dathass:"DatHass",datsheffy:"DatSheffy",dbstyle:"DBstyle",deexcite:"deExcite",deilluminati:"deIlluminati",dendiface:"DendiFace",dogface:"DogFace",doomguy:"DOOMGuy",eagleeye:"EagleEye",elegiggle:"EleGiggle",evilfetus:"EvilFetus",failfish:"FailFish",fpsmarksman:"FPSMarksman",frankerz:"FrankerZ",freakinstinkin:"FreakinStinkin",fungineer:"FUNgineer",funrun:"FunRun",fuzzyotteroo:"FuzzyOtterOO",gasjoker:"GasJoker",gingerpower:"GingerPower",grammarking:"GrammarKing",hassanchop:"HassanChop",heyguys:"HeyGuys",hotpokket:"HotPokket",humblelife:"HumbleLife",itsboshytime:"ItsBoshyTime",jebaited:"Jebaited",jkanstyle:"JKanStyle",joncarnage:"JonCarnage",kapow:"KAPOW",kappa:"Kappa",kappapride:"KappaPride",keepo:"Keepo",kevinturtle:"KevinTurtle",kippa:"Kippa",kreygasm:"Kreygasm",kzskull:"KZskull",mau5:"Mau5",mcat:"mcaT",mechasupes:"MechaSupes",mrdestructoid:"MrDestructoid",mvgame:"MVGame",nightbat:"NightBat",ninjatroll:"NinjaTroll",nonospot:"NoNoSpot",notatk:"NotATK",notlikethis:"NotLikeThis",omgscoots:"OMGScoots",onehand:"OneHand",opieop:"OpieOP",optimizeprime:"OptimizePrime",osbeaver:"OSbeaver",osbury:"OSbury",osdeo:"OSdeo",osfrog:"OSfrog",oskomodo:"OSkomodo",osrob:"OSrob",ossloth:"OSsloth",panicbasket:"panicBasket",panicvis:"PanicVis",pazpazowitz:"PazPazowitz",peopleschamp:"PeoplesChamp",permasmug:"PermaSmug",picomause:"PicoMause",pipehype:"PipeHype",pjharley:"PJHarley",pjsalt:"PJSalt",pmstwin:"PMSTwin",pogchamp:"PogChamp",poooound:"Poooound",praiseit:"PraiseIt",prchase:"PRChase",punchtrees:"PunchTrees",puppeyface:"PuppeyFace",raccattack:"RaccAttack",ralpherz:"RalpherZ",redcoat:"RedCoat",residentsleeper:"ResidentSleeper",ritzmitz:"RitzMitz",rulefive:"RuleFive",shadylulu:"ShadyLulu",shazam:"Shazam",shazamicon:"shazamicon",shazbotstix:"ShazBotstix",shibez:"ShibeZ",smorc:"SMOrc",smskull:"SMSkull",sobayed:"SoBayed",soonerlater:"SoonerLater",srihead:"SriHead",ssssss:"SSSsss",stonelightning:"StoneLightning",strawbeary:"StrawBeary",supervinlin:"SuperVinlin",swiftrage:"SwiftRage",tbbaconbiscuit:"tbBaconBiscuit",tbchickenbiscuit:"tbChickenBiscuit",tbquesarito:"tbQuesarito",tbsausagebiscuit:"tbSausageBiscuit",tbspicy:"tbSpicy",tbsriracha:"tbSriracha",tf2john:"TF2John",theking:"TheKing",theringer:"TheRinger",thetarfu:"TheTarFu",thething:"TheThing",thunbeast:"ThunBeast",tinyface:"TinyFace",toospicy:"TooSpicy",trihard:"TriHard",ttours:"TTours",uleetbackup:"UleetBackup",unclenox:"UncleNox",unsane:"UnSane",vaultboy:"VaultBoy",volcania:"Volcania",wholewheat:"WholeWheat",winwaker:"WinWaker",wtruck:"WTRuck",wutface:"WutFace",youwhy:"YouWHY"};EmoteModule.prototype.init=function(){var e=this;this.emoteObserver=new MutationObserver(function(t){t.forEach(function(t){for(var a=0;a<t.addedNodes.length;++a){var i=t.addedNodes.item(a);if(i){var o=e.getNodes(i);for(var n in o)e.injectEmote(o[n])}}})})},EmoteModule.prototype.observe=function(){this.emoteObserver.observe(document,{childList:!0,subtree:!0})},EmoteModule.prototype.getNodes=function(e){for(var t,a=[],i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=i.nextNode();)a.push(t);return a},EmoteModule.prototype.injectEmote=function(e){if("undefined"!=typeof emotesTwitch&&e.parentElement){var t=e.parentElement;if("SPAN"==t.tagName){var a=t.innerHTML,i=a.split(" ");i&&(i.some(function(e){emotesTwitch.hasOwnProperty(e)?a=a.replace(e,"<img src="+twitchEmoteUrlStart+emotesTwitch[e]+twitchEmoteUrlEnd+" title="+e+"></img>"):"undefined"!=typeof emotesFfz&&ffzEnabled&&(emotesFfz.hasOwnProperty(e)?a=a.replace(e,"<img src="+ffzEmoteUrlStart+emotesFfz[e]+ffzEmoteUrlEnd+" title="+e+"></img>"):"undefined"!=typeof emotesBTTV&&bttvEnabled&&emotesBTTV.hasOwnProperty(e)&&(a=a.replace(e,"<img src="+bttvEmoteUrlStart+emotesBTTV[e]+bttvEmoteUrlEnd+" title="+e+"></img>")))}),t.innerHTML=a)}}},EmoteModule.prototype.autoCapitalize=function(){var e=this;console.log("autocap"),$("body").delegate($(".channel-textarea-inner textarea"),"keyup change paste",function(){if(autoCapitalize){var t=$(".channel-textarea-inner textarea").val(),a=t.split(" ").pop();if(a.length>3){var i=e.capitalize(a.toLowerCase());null!=i&&$(".channel-textarea-inner textarea").val(t.replace(a,i))}}})},EmoteModule.prototype.capitalize=function(e){return twitchAc.hasOwnProperty(e)?twitchAc[e]:null},PublicServers.prototype.init=function(){};var globalEmotes={":(":2,":)":1,":/":10,":D":3,":o":8,":p":12,":z":5,";)":11,";p":13,"<3":9,">(":4,"B)":7,o_o:6,"R)":14,"4Head":354,ANELE:3792,ArgieB8:51838,ArsonNoSexy:50,AsianGlow:74,AtGL:9809,AthenaPMS:32035,AtIvy:9800,AtWW:9801,BabyRage:22639,BatChest:1905,BCWarrior:30,BibleThump:86,BigBrother:1904,BionicBunion:24,BlargNaut:38,BloodTrail:69,BORT:243,BrainSlug:881,BrokeBack:4057,BuddhaBar:27602,CoolCat:58127,CorgiDerp:49106,CougarHunt:21,DAESuppy:973,DansGame:33,DatHass:20225,DatSheffy:170,DBstyle:73,deExcite:46249,deIlluminati:46248,DendiFace:58135,DogFace:1903,DOOMGuy:54089,EagleEye:20,EleGiggle:4339,EvilFetus:72,FailFish:360,FPSMarksman:42,FrankerZ:65,FreakinStinkin:39,FUNgineer:244,FunRun:48,FuzzyOtterOO:168,GasJoker:9802,GingerPower:32,GrammarKing:3632,HassanChop:68,HeyGuys:30259,HotPokket:357,HumbleLife:46881,ItsBoshyTime:169,Jebaited:90,JKanStyle:15,JonCarnage:26,KAPOW:9803,Kappa:25,KappaPride:55338,Keepo:1902,KevinTurtle:40,Kippa:1901,Kreygasm:41,KZskull:5253,Mau5:30134,mcaT:35063,MechaSupes:9804,MrDestructoid:28,MVGame:29,NightBat:9805,NinjaTroll:45,NoNoSpot:44,NotATK:34875,NotLikeThis:58765,OMGScoots:91,OneHand:66,OpieOP:356,OptimizePrime:16,OSbeaver:47005,OSbury:47420,OSdeo:47007,OSfrog:47008,OSkomodo:47010,OSrob:47302,OSsloth:47011,panicBasket:22998,PanicVis:3668,PazPazowitz:19,PeoplesChamp:3412,PermaSmug:27509,PicoMause:27,PipeHype:4240,PJHarley:9808,PJSalt:36,PMSTwin:92,PogChamp:88,Poooound:358,PraiseIt:38586,PRChase:28328,PunchTrees:47,PuppeyFace:58136,RaccAttack:27679,RalpherZ:1900,RedCoat:22,ResidentSleeper:245,RitzMitz:4338,RuleFive:361,ShadyLulu:52492,Shazam:9807,shazamicon:9806,ShazBotstix:87,ShibeZ:27903,SMOrc:52,SMSkull:51,SoBayed:1906,SoonerLater:355,SriHead:14706,SSSsss:46,StoneLightning:17,StrawBeary:37,SuperVinlin:31,SwiftRage:34,tbBaconBiscuit:44499,tbChickenBiscuit:56879,tbQuesarito:56883,tbSausageBiscuit:56881,tbSpicy:56882,tbSriracha:56880,TF2John:1899,TheKing:50901,TheRinger:18,TheTarFu:70,TheThing:7427,ThunBeast:1898,TinyFace:67,TooSpicy:359,TriHard:171,TTours:38436,UleetBackup:49,UncleNox:3666,UnSane:71,VaultBoy:54090,Volcania:166,WholeWheat:1896,WinWaker:167,WTRuck:1897,WutFace:28087,YouWHY:4337};QuickEmoteMenu.prototype.init=function(){var e,t=$("<div/>",{id:"emote-menu"}),a=$("<div/>",{id:"emote-menu-header"}).append($("<span/>",{text:"Global Emotes"})),i=$("<div/>",{id:"emote-menu-inner"});t.append(a),t.append(i);var o=$("<div/>",{id:"twitchcord-button-container",style:"display:none"}).append($("<button/>",{id:"twitchcord-button",onclick:"return false;"}));$(".content.flex-spacer.flex-horizontal .flex-spacer.flex-vertical form").append(o),o.append(t),$("#twitchcord-button").on("click",function(){e=!e,e?(t.addClass("emotemenu-open"),$(this).addClass("twitchcord-button-open")):(t.removeClass(),$(this).removeClass())}),settingsCookie["bda-es-qme"]&&o.show();for(var n in globalEmotes){var s=globalEmotes[n];i.append($("<div/>",{"class":"emote-container"}).append($("<img/>",{"class":"emote-icon",id:n,src:"https://static-cdn.jtvnw.net/emoticons/v1/"+s+"/1.0",title:n})))}$(".emote-icon").on("click",function(){var e=$(this).attr("id"),t=$(".channel-textarea-inner textarea");t.val(" "==t.val().slice(-1)?t.val()+e:t.val()+" "+e)})},SettingsPanel.prototype.getPanel=function(){return this.tcSettingsPanel},SettingsPanel.prototype.init=function(){var e=this;this.tcSettingsPanel=$("<div/>",{id:"tc-settings-panel"}),this.getPanel().append($("<div/>",{id:"tc-settings-panel-header"}).append($("<h2/>",{text:"BetterDiscord - Settings"})).append($("<span/>",{id:"tc-settings-close",text:"X",style:"cursor:pointer;"})));var t=$("<ul/>");this.getPanel().append($("<div/>",{id:"tc-settings-panel-body"}).append(t)),$.each(settings,function(e,a){var i="tc-switch-on",o="tc-switch-off";settingsCookie[a.id]?i="tc-switch-on active":o="tc-switch-off active",t.append($("<li/>").append($("<h2/>",{text:e})).append($("<span/>",{text:" - "+a.info})).append($("<div/>",{"class":a.implemented?"tc-switch":"tc-switch disabled",id:a.id}).append($("<span/>",{"class":o,text:"OFF"})).append($("<span/>",{"class":i,text:"ON"}))))});var a=$("<div/>",{id:"tc-settings-panel-footer"});a.append($("<span/>",{id:"tc-about",text:"BetterDiscord v"+version+" by Jiiks | Settings are automatically saved."}));var i=$("<span/>",{id:"tc-links"});$.each(links,function(e,t){i.append($("<a/>",{href:t,text:e})),i.append($("<span/>",{text:" | "}))}),a.append(i),this.getPanel().append(a),$("body").append(this.getPanel()),$("#tc-settings-close").on("click",function(){e.show()}),$(".tc-switch").on("click",function(){e.handler($(this))})},SettingsPanel.prototype.show=function(){this.getPanel().toggle(),$("#tc-settings-li").removeClass(),this.getPanel().is(":visible")&&$("#tc-settings-li").addClass("active")},SettingsPanel.prototype.handler=function(e){var t=e.attr("id"),a=settingsCookie[t];a=!a,settingsCookie[t]=a;var i=$("#"+t+" .tc-switch-off"),o=$("#"+t+" .tc-switch-on");i.removeClass("active"),o.removeClass("active"),a?o.addClass("active"):i.addClass("active"),$.cookie("better-discord",JSON.stringify(settingsCookie)),settingsCookie["bda-es-qme"]?$("#twitchcord-button-container").show():$("#twitchcord-button-container").hide(),autoCapitalize=settingsCookie["bda-es-ace"]},Utils.prototype.getTextArea=function(){return $(".channel-textarea-inner textarea")},Utils.prototype.jqDefer=function(e){window.jQuery?e():setTimeout(function(){this.jqDefer(e)},100)};